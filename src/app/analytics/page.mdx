import { defaultKeywords, defaultOpenGraph } from '../metadata'

export const metadata = {
  title: 'Test Analytics',
  description:
    'Monitor and optimize your test processes using First-Pass Yield (FPY) and Process Capability Index (Cpk) in TofuPilot.',
  keywords: [
    ...defaultKeywords,
    'first-pass yield',
    'FPY',
    'process capability index',
    'Cpk',
    'test optimization',
    'quality control',
  ],
  openGraph: {
    ...defaultOpenGraph,
    title:
      'First-Pass Yield and Process Capability Index - Optimize Your Test Performance | TofuPilot Documentation',
    description:
      'Learn how to analyze and improve your test processes using First-Pass Yield (FPY) and Process Capability Index (Cpk) in TofuPilot.',
    images: [
      {
        url: 'https://tofupilot.com/docs/analytics-header.png',
        width: 800,
        height: 600,
        alt: 'TofuPilot manufacturing test analytics showing test phase performance with OpenHTF.',
      },
    ],
  },
}

# Test analytics

Monitor your test capabilities at the test phase level. {{ className: 'lead' }}

<Image
  src="/analytics-header.png"
  alt="TofuPilot manufacturing test analytics showing test phase performance with OpenHTF."
/>

## Overview

When running your tests, issues can arise: instruments may fail to connect, limits may reject good parts, or some phases may take too long.

To troubleshoot effectively, use industry-standard metrics like First-Pass Yield (FPY) and Process Capability Index (Cpk) to spot areas for improvement in your testing process.

## First-pass yield (FPY)

The test procedure page shows detailed execution statistics. One key metric is First-pass yield, which tracks the percentage of parts passing without rework and indicates process efficiency.

In TofuPilot, FPY is calculated in real time for both the overall test and each phase. You can select the data and time period for calculating FPY using the dropdown menu in the top right.

<Image
  src="/analytics-first-pass-yield.png"
  alt="TofuPilot analytics showing first-pass yield (FPY) for test phases in OpenHTF."
/>

## Process capability index (Cpk)

The Process Capability Index measures how well a test stays within its limits. It applies to measurements with numerical value and at least one lower or upper limit.

In TofuPilot, Cpk is calculated in real-time for each measurement of each phase, showing you how capable your test is.

<Image
  src="/analytics-cpk.png"
  alt="TofuPilot analytics showing process capability index (Cpk) for test phases in OpenHTF."
/>

### Understanding Cpk

A low Cpk means your test is too variable or not centered, leading to inconsistent results.

- **Cpk > 1.33**: test process is highly capable.
- **Cpk = 1**: test process is marginally capable.
- **Cpk < 1**: test process is not capable; improvements are needed.

A low Cpk often means your process has too much variation: limits are too strict or not centered, or test values are too close to the limits, causing inconsistent or out-of-spec results.

### How-to fix low Cpk

1. **Identify Test Phases**: Use TofuPilot's phase and measurement selection to find measurements with low Cpk that are dragging down the average.
2. **Check Control Charts**: Review historical values to see if it's a sudden drop (indicating a quality issue) or if limits were always too strict or poorly centered.
3. **Use Filters**: Apply filters like revision, batch number, and date in TofuPilot to pinpoint the root cause of low Cpk.

<Image
  src="/analytics-control-chart.png"
  alt="TofuPilot control chart showing historical data for test phases in OpenHTF."
/>

### Cpk Calculation

You can compute Cpk by dividing the smaller of the differences between the test mean and the specification limits (low and high) by three times the test standard deviation.

<Code
  language="plaintext"
  code={`Cpk = min[(USL - μ) / (3σ), (μ - LSL) / (3σ)]`}
/>

- **USL** = Upper Specification Limit
- **LSL** = Lower Specification Limit
- **μ** = Process Mean
- **σ** = Standard Deviation
