import { defaultKeywords, defaultOpenGraph } from '../metadata'

export const metadata = {
  title: 'Phases',
  description:
    'This guide shows how to create and add various test phases in TofuPilot and view the automatically generated reports, helping to identify frequent failures and time-consuming phases.',
  keywords: [
    ...defaultKeywords,
    'Test Phases',
    'Test Steps',
    'TofuPilot Phases',
    'Automated Testing',
    'Test Analytics',
    'Hardware Testing',
  ],
  openGraph: {
    ...defaultOpenGraph,
    title:
      'Phases - Test Phase Management & Analytics | TofuPilot Documentation',
    description:
      'Learn how to define, execute, and analyze test phases in TofuPilot, improving test efficiency and failure analysis.',
    images: [
      {
        url: 'https://tofupilot.com/docs/phases-header.png',
        width: 800,
        height: 600,
        alt: 'Phases section header showing test phase management within TofuPilot.',
      },
    ],
  },
}

# Phases

Structure your hardware tests with phases.{{ className: 'lead' }}

<Image
  src="/phases-header.png"
  alt="Phases section header showing test phase management whithin TofuPilot."
/>

## Overview

A test procedure in TofuPilot is made of sequential phases. These represent logical blocks of a test. Each phase performs a specific function and records its own start and end time, as well as its outcome.


## Integration

TofuPilot tracks each phase with its name, outcome, and duration. With OpenHTF, you simply define the phases in the `Test`, and TofuPilot collects the information automatically.

<CodeGroup>
  <CodeGithub
    title="OpenHTF"
    branch="main"
    path="docs_tofupilot/phases/required/openhtf/main.py"
  />
  <CodeGithub
    title="Vanilla Python"
    branch="main"
    path="docs_tofupilot/phases/required/client/main.py"
  />
</CodeGroup>

### Phases properties

<Properties>
    <Property name="phases" type="array ">
        List of phases.
    </Property>
    <Property name="name" type="str"  indent={1}>
        The name of the phase.
    </Property>
    <Property name="outcome" type='"PASS" | "FAIL" | "ERROR" | "SKIP"'  indent={1}>
        Result of the phase. _Example: "PASS"_
    </Property>
    <Property name="start_time_millis" type="number (optional)"  indent={1}>
        Start time (Unix ms). _Example: 1726147200000_
    </Property>
    <Property name="end_time_millis" type="number (optional)"  indent={1}>
        End time (Unix ms). _Example: 1726147230000_
    </Property>
    <Property name="measurements" type="array (optional)"  indent={1}>
        List of measurements in the phase.
    </Property>
</Properties>

## In-app view

### Run page

Each test run shows a breakdown of all phases and their associated [measurements](/measurements).

<Image
  src="/phases-page-run.png"
  alt="Phases section header showing test phase management whithin TofuPilot."
/>

### Procedure Page

Clicking a phase in the **Run** page opens the **Procedure** page. You can analyze all historical data for that phase: average duration, yield, number of runs, and Cpk.

<Image
  src="/phases-page-procedure1.png"
  alt="Phases section header showing test phase management whithin TofuPilot."
/>

These features will be explained in more detail in the [Test phases analysis section](/analysis).
