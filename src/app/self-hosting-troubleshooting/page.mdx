import { defaultKeywords, defaultOpenGraph } from '../metadata'

export const metadata = {
  title: 'Self-Hosting',
  description: 'This guide explains how to self-host TofuPilot.',
  keywords: [
    ...defaultKeywords,
    'Self-Hosting',
    'TofuPilot Deployment',
    'Docker Setup',
    'On-Premise Installation',
    'Enterprise Hosting',
  ],
  openGraph: {
    ...defaultOpenGraph,
    title:
      'Self-Hosting - Deploy TofuPilot On-Premise | TofuPilot Documentation',
    description:
      'Learn how to self-host TofuPilot for on-premise deployment. Includes setup, authentication, and backup guidelines.',
    images: [
      {
        url: 'https://tofupilot.com/docs/self-hosting-header.png',
        width: 800,
        height: 600,
        alt: 'Self-hosting header showing TofuPilot deployed on a private server.',
      },
    ],
  },
}

# Self-Hosting: Troubleshooting

Self-host TofuPilot for scenarios where managed cloud is not an option. {{ className: 'lead' }}

<Image
  src="/self-hosting-header.png"
  alt="Screenshot of TofuPilot application with custom url"
/>

## Overview

This guide helps you troubleshoot common issues when self-hosting TofuPilot. It covers architecture-specific errors (like on Apple Silicon), port conflicts, SSL setup, and how to check service status.


## ARM64 Architecture (Apple Silicon)

If you encounter "exec format error" on ARM64 systems:

1. **Docker Desktop (Mac)**: Enable Rosetta emulation
   - Docker Desktop → Settings → General → Use Rosetta for x86/amd64 emulation

2. **Install QEMU emulators**:
   <Code
     language="bash"
     code={`docker run --rm --privileged tonistiigi/binfmt --install all`}
   />

## Port Conflicts

If ports 80/443 are in use, check running services:

<Code
  language="bash"
  code={`sudo netstat -tlnp | grep -E ':80|:443'`}
/>

## SSL Certificate Issues

If HTTPS is not working immediately after installation:

- SSL certificates may take a few minutes to generate
- Check certificate status: `curl -I https://tofupilot.yourcompany.com`
- Verify DNS records point to your server's IP address

## Service Status

Check if all services are running properly:

<Code
  language="bash"
  code={`docker compose ps`}
/>

View service logs:

<Code
  language="bash"
  code={`docker compose logs -f`}
/>
