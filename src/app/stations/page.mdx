import { defaultKeywords, defaultOpenGraph } from '../metadata'

export const metadata = {
  title: 'Stations',
  description:
    'This guide shows how to create and add various stations in TofuPilot.',
  keywords: [
    ...defaultKeywords,
    'Stations',
    'Test Analytics',
    'Hardware Testing',
  ],
  openGraph: {
    ...defaultOpenGraph,
    title:
      'Stations | TofuPilot Documentation',
    description:
      'Learn how to define, execute, and analyze test phases in TofuPilot, improving test efficiency and failure analysis.',
    images: [
      {
        url: 'https://tofupilot.com/docs/phases-header.png',
        width: 800,
        height: 600,
        alt: 'Phases section header showing test phase management within TofuPilot.',
      },
    ],
  },
}

# Stations

Deploy your test stations either in-house or at your suppliers. {{ className: 'lead' }}

<Image
  src="/station-header.png"
  alt="Screenshot of Tofupilot illustrating the station feature."
/>

## Overview

Deploying test procedures in production often means duplicating test benches across multiple suppliers or production sites. At the same time, it's crucial to control write access, ensuring only authorized procedures and components are tested. Stations in TofuPilot make it easy to share procedures across physical benches, manage access, and accurately track analytics.

## Integration

To create a station in TofuPilot:

1. Go to the **Stations** tab.
2. Click **Create Station** and enter a name. A unique station ID (e.g., STA1) will be generated.
3. **Generate the API key**
4. Use the generated Station API key in your TofuPilot client by passing it as the `api_key` argument in your script or by storing it in your environment variables. Check dedicated **[API Key](/user-management#api-key)** section for more details.
    <CodeGroup>
      <Code language="bash" title="OpenHTF" code={`with TofuPilot(test, api_key="YOUR_STATION_API_KEY"):
        test.execute(lambda: "PCB1A001")`} />
      <Code language="bash" title="Vanilla Python" code={`client = TofuPilotClient(api_key="YOUR_STATION_API_KEY")`} />
    </CodeGroup>
5. Link relevant procedures to the station.
6. In your script, make sure to use the `procedure_id` linked to your station when pushing test runs to TofuPilot.

### Required parameters

<CodeGroup>
  <CodeGithub
    title="OpenHTF"
    branch="main"
    path="docs_tofupilot/stations/openhtf/main.py"
  />

  <CodeGithub
    title="Vanilla Python"
    branch="main"
    path="docs_tofupilot/stations/client/main.py"
  />
</CodeGroup>

<Properties>
  <Property name="procedure_id" type="str">
      The ID of the procedure associated with the station.
  </Property>
  <Property name="api_key" type="str">
      The API key generated by TofuPilot for the station.
  </Property>
</Properties>

## In-app view

### Manage Stations

In the Stations tab, you can create and manage your Stations.

<Image
  src="/station-list.png"
  alt="Screenshot of the Station page demonstrating how to create and manage stations."
/>

Click on a specific Station (e.g. here "STA1") to:

- Generate, regenerate, or delete API keys.
- Add (by clicking the `+` button next to Procedures) or remove linked procedures .
- Edit the station's name and ID.
- Add a picture to the station.



<Image
  src="/station-api.png"
  alt="Screenshot of Tofupilot showing how to manage station permissions with API keys and link procedures to stations."
/>

You can also monitor yield and weekly runs for each linked procedure.

### Filter Procedures by Station
In the **Procedures** section, you can filter test runs by Stations to view data from a specific station, along with related Components and Batch numbers.

<Image
  src="/station-page-procedure.png"
  alt="Screenshot showing procedure filters with options to filter by station, component, and batch."
/>
